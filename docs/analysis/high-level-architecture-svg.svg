<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Frontend -->
  <rect x="50" y="50" width="200" height="100" rx="10" fill="#b3d9ff" stroke="#2a7fff" stroke-width="2"/>
  <text x="150" y="85" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold">Frontend (Next.js)</text>
  <rect x="70" y="95" width="70" height="40" rx="5" fill="#d6ebff" stroke="#2a7fff" stroke-width="1"/>
  <text x="105" y="120" text-anchor="middle" font-family="Arial" font-size="12">User Interface</text>
  <rect x="160" y="95" width="70" height="40" rx="5" fill="#d6ebff" stroke="#2a7fff" stroke-width="1"/>
  <text x="195" y="120" text-anchor="middle" font-family="Arial" font-size="12">Thread UI</text>

  <!-- Backend -->
  <rect x="50" y="200" width="200" height="200" rx="10" fill="#c0f0c0" stroke="#4caf50" stroke-width="2"/>
  <text x="150" y="225" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold">Backend (FastAPI)</text>
  <rect x="70" y="240" width="160" height="30" rx="5" fill="#e0f8e0" stroke="#4caf50" stroke-width="1"/>
  <text x="150" y="260" text-anchor="middle" font-family="Arial" font-size="12">API Layer</text>
  <rect x="70" y="280" width="160" height="30" rx="5" fill="#e0f8e0" stroke="#4caf50" stroke-width="1"/>
  <text x="150" y="300" text-anchor="middle" font-family="Arial" font-size="12">ThreadManager</text>
  <rect x="70" y="320" width="160" height="30" rx="5" fill="#e0f8e0" stroke="#4caf50" stroke-width="1"/>
  <text x="150" y="340" text-anchor="middle" font-family="Arial" font-size="12">ToolRegistry</text>
  <rect x="70" y="360" width="160" height="30" rx="5" fill="#e0f8e0" stroke="#4caf50" stroke-width="1"/>
  <text x="150" y="380" text-anchor="middle" font-family="Arial" font-size="12">ContextManager</text>

  <!-- Tool System -->
  <rect x="300" y="50" width="200" height="350" rx="10" fill="#efe3ff" stroke="#a66df0" stroke-width="2"/>
  <text x="400" y="75" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold">Tool System</text>
  <rect x="320" y="90" width="160" height="30" rx="5" fill="#f5ebff" stroke="#a66df0" stroke-width="1"/>
  <text x="400" y="110" text-anchor="middle" font-family="Arial" font-size="12">Tool (Base Class)</text>
  
  <rect x="320" y="130" width="160" height="250" rx="5" fill="#f5ebff" stroke="#a66df0" stroke-width="1"/>
  <text x="400" y="150" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">Tool Instances</text>
  <rect x="330" y="160" width="140" height="30" rx="5" fill="#f9f2ff" stroke="#a66df0" stroke-width="1"/>
  <text x="400" y="180" text-anchor="middle" font-family="Arial" font-size="12">SandboxShellTool</text>
  <rect x="330" y="200" width="140" height="30" rx="5" fill="#f9f2ff" stroke="#a66df0" stroke-width="1"/>
  <text x="400" y="220" text-anchor="middle" font-family="Arial" font-size="12">SandboxFilesTool</text>
  <rect x="330" y="240" width="140" height="30" rx="5" fill="#f9f2ff" stroke="#a66df0" stroke-width="1"/>
  <text x="400" y="260" text-anchor="middle" font-family="Arial" font-size="12">SandboxBrowserTool</text>
  <rect x="330" y="280" width="140" height="30" rx="5" fill="#f9f2ff" stroke="#a66df0" stroke-width="1"/>
  <text x="400" y="300" text-anchor="middle" font-family="Arial" font-size="12">WebSearchTool</text>
  <rect x="330" y="320" width="140" height="30" rx="5" fill="#f9f2ff" stroke="#a66df0" stroke-width="1"/>
  <text x="400" y="340" text-anchor="middle" font-family="Arial" font-size="12">Other Tools...</text>

  <!-- Infrastructure Services -->
  <rect x="300" y="420" width="200" height="130" rx="10" fill="#fff8dc" stroke="#ffcd56" stroke-width="2"/>
  <text x="400" y="445" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold">Infrastructure Services</text>
  <rect x="320" y="460" width="160" height="25" rx="5" fill="#fffbea" stroke="#ffcd56" stroke-width="1"/>
  <text x="400" y="477" text-anchor="middle" font-family="Arial" font-size="12">Redis</text>
  <rect x="320" y="495" width="160" height="25" rx="5" fill="#fffbea" stroke="#ffcd56" stroke-width="1"/>
  <text x="400" y="512" text-anchor="middle" font-family="Arial" font-size="12">Supabase Database</text>
  <rect x="320" y="530" width="160" height="25" rx="5" fill="#fffbea" stroke="#ffcd56" stroke-width="1"/>
  <text x="400" y="547" text-anchor="middle" font-family="Arial" font-size="12">Daytona Sandboxes</text>

  <!-- External APIs -->
  <rect x="550" y="200" width="200" height="130" rx="10" fill="#ffebee" stroke="#ef5350" stroke-width="2"/>
  <text x="650" y="225" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold">External APIs</text>
  <rect x="570" y="240" width="160" height="25" rx="5" fill="#fff5f5" stroke="#ef5350" stroke-width="1"/>
  <text x="650" y="257" text-anchor="middle" font-family="Arial" font-size="12">LLM Provider (Anthropic, OpenAI)</text>
  <rect x="570" y="275" width="160" height="25" rx="5" fill="#fff5f5" stroke="#ef5350" stroke-width="1"/>
  <text x="650" y="292" text-anchor="middle" font-family="Arial" font-size="12">Tavily Search API</text>
  <rect x="570" y="310" width="160" height="25" rx="5" fill="#fff5f5" stroke="#ef5350" stroke-width="1"/>
  <text x="650" y="327" text-anchor="middle" font-family="Arial" font-size="12">Firecrawl API</text>

  <!-- Connections -->
  <!-- Frontend to Backend -->
  <line x1="150" y1="150" x2="150" y2="200" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <!-- Backend Connections -->
  <line x1="150" y1="200" x2="105" y2="240" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="150" y1="310" x2="150" y2="320" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="150" y1="350" x2="150" y2="360" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <!-- Backend to External -->
  <line x1="250" y1="260" x2="570" y2="250" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="250" y1="340" x2="300" y2="450" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <!-- Backend to Tool System -->
  <line x1="250" y1="300" x2="320" y2="105" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <!-- Tool Connections -->
  <line x1="400" y1="120" x2="400" y2="130" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="330" y1="180" x2="300" y2="480" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="330" y1="220" x2="300" y2="500" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="330" y1="260" x2="300" y2="520" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="470" y1="280" x2="570" y2="280" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="470" y1="300" x2="570" y2="310" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- Arrowhead marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
</svg>